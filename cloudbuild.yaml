# Set the following build variables via the Cloud Build:
# _REGION
# _SECRET_KEY
# _GS_BUCKET
steps:
- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  id: Deploy
  args: 
    - gcloud
    - functions
    - deploy
    - webhooks
    - --trigger-http
    - --allow-unauthenticated
    - --gen2
    - --runtime=nodejs20
    - --region=${_REGION}
    - --source=src/
    - --entry-point=index.js
  env: 
    - 'SECRET_KEY=${_SECRET_KEY}'
    - 'GS_BUCKET=${_GS_BUCKET}'